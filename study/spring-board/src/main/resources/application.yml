spring:
  profiles:
    active: local   # 기본 실행 프로필을 local로

---
spring:
  main:
    allow-bean-definition-overriding: true
  config:
    activate:
      on-profile: local
  datasource:
    url: jdbc:mysql://localhost:3306/board?useSSL=false&serverTimezone=Asia/Seoul
    username: ${DB_USERNAME:root}
    password: ${DB_PASSWORD:}
    driver-class-name: com.mysql.cj.jdbc.Driver

  jpa:
    hibernate:
      ddl-auto: update   # 개발 편의
    show-sql: true
    database-platform: org.hibernate.dialect.MySQL8Dialect

  data:
    redis:
      host: localhost
      port: 6379
      connect-timeout: 3000ms
      timeout: 3000ms

# 🔥 JWT 설정 추가
jwt:
  secret: "MyVerySecureJWTSecretKeyForDevelopmentThatIsAtLeast32BytesLongToMeetSecurityRequirements123456789"
  access-expiration-ms: 86400000  # 24시간 (밀리초)
  refresh-expiration-ms: 604800000

---
spring:
  main:
    allow-bean-definition-overriding: true
  config:
    activate:
      on-profile: prod
  datasource:
    url: jdbc:mysql://prod-db-host:3306/board?useSSL=false&serverTimezone=Asia/Seoul
    username: ${DB_USERNAME}
    password: ${DB_PASSWORD}
    driver-class-name: com.mysql.cj.jdbc.Driver

  jpa:
    hibernate:
      ddl-auto: validate   # 운영은 검증만
    show-sql: false
    database-platform: org.hibernate.dialect.MySQL8Dialect

  data:
    redis:     # redis
      host: ${REDIS_HOST:localhost}
      port: 6379
      connect-timeout: 3000ms
      timeout: 3000ms
      lettuce:
        pool:
          max-active: 8
          max-idle: 8
          min-idle: 0



# 🔥 운영환경용 JWT 설정 (환경변수 사용 권장)
jwt:
  secret: ${JWT_SECRET}  # 환경변수에서 가져오기
  access-expiration-ms: ${JWT_EXPIRATION:86400000}  # 기본값 24시간
  refresh-expiration-ms: ${JWT_REFRESH_EXPIRATION:604800000}

